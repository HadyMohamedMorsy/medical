<app-breadcrumb [items]="items"></app-breadcrumb>
<div class="grid mt-2">
  <div class="col-12 md:col-3">
    <p-card *ngIf="$any(DashboardData$ | async) as dashboardData else loading">
      <div class="flex justify-content-between align-items-center">
        <i *ngIf="!dashboardData" class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 15 15"><path fill="none" stroke="hsl(0, 84%, 60%)" d="M3.5 0v5m8-5v5M3 7.5h3m6 0H9m-6 3h3m3 0h3m-10.5-8h12a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-12a1 1 0 0 1-1-1v-10a1 1 0 0 1 1-1Z"/></svg>
        <div class="content flex flex-column justify-content-between">
          <h6 class="text-lg font-normal mb-1"> Appointments</h6>
          <span class="text-xl total"> {{dashboardData.result.Appointments}}</span>
        </div>
      </div>
    </p-card>
  </div>
  <div class="col-12 md:col-3">
    <p-card *ngIf="$any(DashboardData$ | async) as dashboardData else loading">
      <div class="flex justify-content-between align-items-center">
        <i *ngIf="!dashboardData" class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 256 256"><path fill="hsl(0, 84%, 60%)" d="M253.69 190.1a6 6 0 0 0-7.59-3.79l-19.1 6.35l-29.68-59.34A6 6 0 0 0 192 130h-82v-27.95h58a6 6 0 0 0 0-12h-58V77.4a30 30 0 1 0-12 0v14A70 70 0 0 0 112 230c32.62 0 62-22.08 69.81-52.5a6 6 0 0 0-11.62-3c-6.49 25.21-31 43.5-58.19 43.5a58 58 0 0 1-14-114.28V136a6 6 0 0 0 6 6h84.29l30.34 60.68a6 6 0 0 0 7.27 3l24-8a6 6 0 0 0 3.79-7.58ZM86 48a18 18 0 1 1 18 18a18 18 0 0 1-18-18Z"/></svg>
          <div class="content flex flex-column justify-content-between">
            <h6 class="text-lg font-normal mb-1">New patients
            </h6>
            <span class="text-xl total"> {{dashboardData.result.Patients}} </span>
        </div>
      </div>
    </p-card>
  </div>
  <div class="col-12 md:col-3">
    <p-card *ngIf="$any(DashboardData$ | async) as dashboardData else loading">
      <div class="flex justify-content-between align-items-center">
        <i *ngIf="!dashboardData" class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="hsl(0, 84%, 60%)" d="m12 3.77l-.75.84S9.97 6.06 8.68 7.94C7.39 9.82 6 12.07 6 14.23a6 6 0 0 0 6 6a6 6 0 0 0 6-6c0-2.16-1.39-4.41-2.68-6.29a38.7 38.7 0 0 0-2.57-3.33L12 3.77m0 3.13c.44.52.84.95 1.68 2.17c1.21 1.76 2.32 4 2.32 5.16c0 2.22-1.78 4-4 4c-2.22 0-4-1.78-4-4c0-1.16 1.11-3.4 2.32-5.16c.84-1.22 1.24-1.65 1.68-2.17Z"/></svg>
        <div class="content flex flex-column justify-content-between">
          <h6 class="text-lg font-normal mb-1">Users</h6>
          <span class="text-xl total"> {{dashboardData.result.Users}} </span>
        </div>
      </div>
    </p-card>
  </div>
  <div class="col-12 md:col-3">
    <p-card *ngIf="$any(DashboardData$ | async) as dashboardData else loading">
      <div class="flex justify-content-between align-items-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="hsl(0, 84%, 60%)" d="M18 16h-4v2h4v2l3-3l-3-3v2M11 4C8.8 4 7 5.8 7 8s1.8 4 4 4s4-1.8 4-4s-1.8-4-4-4m0 2c1.1 0 2 .9 2 2s-.9 2-2 2s-2-.9-2-2s.9-2 2-2m0 7c-2.7 0-8 1.3-8 4v3h9.5c-.3-.6-.4-1.2-.5-1.9H4.9V17c0-.6 3.1-2.1 6.1-2.1c.5 0 1 .1 1.5.1c.3-.6.6-1.2 1.1-1.7c-1-.2-1.9-.3-2.6-.3"/></svg>
        <div class="content flex flex-column justify-content-between">
          <h6 class="text-lg font-normal mb-1"> CurrentAppointment </h6>
          <span class="text-xl total"> {{dashboardData.result.AppointmentForCurrentDate}} </span>
        </div>
      </div>
    </p-card>
  </div>
</div>
<ng-template #loading>
  <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
</ng-template>

<div class="Last-patients mt-6">
  <h3 class="text-4xl font-medium mb-4">Patients</h3>
  <app-table [DateBind]="data$"
  [searchTable]="'Patient'"
  >
    <ng-template #header let-Patients>
      <th class="text-center"> ID </th>
      <th class="text-center"> Full Name </th>
      <th class="text-center"> Birthday</th>
      <th class="text-center"> Age </th>
      <th class="text-center"> Address </th>
      <th class="text-center"> Phone_Number </th>
      <th class="text-center"> Created_Date </th>
      <th class="text-center"> Action </th>
    </ng-template>
    <ng-template #body let-Patients>
      <td>{{Patients.id}}</td>
      <td>{{Patients.fullName}}</td>
      <td>{{Patients.birthday}}</td>
      <td>{{Patients.age}}</td>
      <td>{{Patients.address | slice:0:25 }}</td>
      <td>{{Patients.phoneNumber}}</td>
      <td>{{Patients.createdAt}}</td>
      <td class="flex justify-content-center">
        <app-actions [ConfirmFieldsPatientsTimeAppointments]="$any(confirmFields)"
        [Delete]="$any(deleting)"
        [UpdatedFields]="$any(updateField)"
        [uploadFileFields]="$any(uploadFields)"
        [pageRedirect]="'home'"
        [rowData]="Patients"
        [idRow]="Patients.id"
        (passId)="routeProfileParent($event , Patients)"
        ></app-actions>
      </td>
    </ng-template>

  </app-table>
</div>


